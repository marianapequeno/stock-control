"use strict";(self.webpackChunkstock_control=self.webpackChunkstock_control||[]).push([[457],{8457:(L,m,n)=>{n.r(m),n.d(m,{ProductsModule:()=>z});var h=n(6814),v=n(95),y=n(6208),Z=n(9862),g=n(4532),l=n(707),d=n(909),C=n(9663),E=n(5609),D=n(3714),M=n(6218),b=n(9653),p=n(1356),S=n(3866),f=n(3904),P=n(3259),a=n(5219),T=n(1365),w=n(8645),u=n(9773),U=n(3762),t=n(4946),O=n(1355),F=n(8671),J=n(8474),A=n(3640);let B=(()=>{class r{transform(e,o){return null!==e?e.length>o?e.substring(0,o)+"...":e:""}static#t=this.\u0275fac=function(o){return new(o||r)};static#e=this.\u0275pipe=t.Yjl({name:"shorten",type:r,pure:!0})}return r})();function R(r,x){if(1&r){const e=t.EpF();t.TgZ(0,"tr")(1,"th",7)(2,"div",8)(3,"div",8),t._uU(4," Nome "),t.qZA(),t.TgZ(5,"div",8),t._UZ(6,"p-sortIcon",9)(7,"p-columnFilter",10),t.qZA()()(),t.TgZ(8,"th",11)(9,"div",8)(10,"div",8),t._uU(11," Quantidade "),t.qZA(),t.TgZ(12,"div",8),t._UZ(13,"p-sortIcon",12)(14,"p-columnFilter",13),t.qZA()()(),t.TgZ(15,"th",14)(16,"div",8)(17,"div",8),t._uU(18," Pre\xe7o "),t.qZA(),t.TgZ(19,"div",8),t._UZ(20,"p-sortIcon",15)(21,"p-columnFilter",16),t.qZA()()(),t.TgZ(22,"th",17)(23,"div",8)(24,"div",8),t._uU(25," Descri\xe7\xe3o "),t.qZA(),t.TgZ(26,"div",8),t._UZ(27,"p-sortIcon",18)(28,"p-columnFilter",19),t.qZA()()(),t.TgZ(29,"th",20)(30,"div",8)(31,"div",8),t._uU(32," Categoria "),t.qZA(),t.TgZ(33,"div",8),t._UZ(34,"p-sortIcon",21)(35,"p-columnFilter",22),t.qZA()()(),t.TgZ(36,"th")(37,"div",23)(38,"p-button",24),t.NdJ("onClick",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.handleProductEvent(s.addProductEvent))}),t.qZA()()()()}2&r&&(t.xp6(7),t.Q6J("showMatchModes",!1)("showOperator",!1)("showAddButton",!1),t.xp6(7),t.Q6J("showMatchModes",!1)("showOperator",!1)("showAddButton",!1),t.xp6(7),t.Q6J("showMatchModes",!1)("showOperator",!1)("showAddButton",!1),t.xp6(7),t.Q6J("showMatchModes",!1)("showOperator",!1)("showAddButton",!1),t.xp6(7),t.Q6J("showMatchModes",!1)("showOperator",!1)("showAddButton",!1))}function H(r,x){if(1&r){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.ALo(7,"currency"),t.qZA(),t.TgZ(8,"td",25),t._uU(9),t.ALo(10,"shorten"),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td")(14,"div",26)(15,"button",27),t.NdJ("click",function(){const i=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.handleProductEvent(c.editProductEvent,null==i?null:i.id))}),t.qZA(),t.TgZ(16,"button",28),t.NdJ("click",function(){const i=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.hancleDeleteProduct(null==i?null:i.id,null==i?null:i.name))}),t.qZA()()()()}if(2&r){const e=x.$implicit;t.xp6(2),t.Oqu(null==e?null:e.name),t.xp6(2),t.Oqu(null==e?null:e.amount),t.xp6(2),t.Oqu(t.xi3(7,6,null==e?null:e.price,"BRL")),t.xp6(2),t.Q6J("pTooltip",null==e?null:e.description),t.xp6(1),t.hij(" ",t.xi3(10,9,null==e?null:e.description,25)," "),t.xp6(3),t.Oqu(null==e||null==e.category?null:e.category.name)}}const $=function(){return["name","amount"]},N=function(){return{"min-width":"75rem"}};let Q=(()=>{class r{constructor(){this.products=[],this.productEvent=new t.vpe,this.deleteProductEvent=new t.vpe,this.addProductEvent=A.h.ADD_PRODUCT_EVENT,this.editProductEvent=A.h.EDIT_PRODUCT_EVENT}handleProductEvent(e,o){e&&""!==e&&this.productEvent.emit(o&&""!==o?{action:e,id:o}:{action:e})}hancleDeleteProduct(e,o){""!==e&&""!==o&&this.deleteProductEvent.emit({product_id:e,productName:o})}static#t=this.\u0275fac=function(o){return new(o||r)};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-products-table"]],inputs:{products:"products"},outputs:{productEvent:"productEvent",deleteProductEvent:"deleteProductEvent"},decls:7,vars:11,consts:[[1,"container"],[1,"col-12"],["styleClass","shadow-3 m-5 text-gray-800","header","Produtos em estoque"],["dataKey","id","currentPageReportTemplate","Mostrando {first} de {last} de {totalRecords} produtos",3,"value","rows","paginator","responsive","globalFilterFields","tableStyle","selection","rowHover","showCurrentPageReport","selectionChange"],["productsTable",""],["pTemplate","header"],["pTemplate","body"],["pSortableColumn","name"],[1,"flex","justify-content-between","align-items-center"],["field","name"],["type","text","field","name","display","menu","matchMode","contains",3,"showMatchModes","showOperator","showAddButton"],["pSortableColumn","amount"],["field","amount"],["type","text","field","amount","display","menu","matchMode","contains",3,"showMatchModes","showOperator","showAddButton"],["pSortableColumn","price"],["field","price"],["type","text","field","price","display","menu","matchMode","contains",3,"showMatchModes","showOperator","showAddButton"],["pSortableColumn","description"],["field","description"],["type","text","field","description","display","menu","matchMode","contains",3,"showMatchModes","showOperator","showAddButton"],["pSortableColumn","category.name"],["field","category.name"],["type","text","field","category.name","display","menu","matchMode","contains",3,"showMatchModes","showOperator","showAddButton"],[1,"flex","justify-content-center","align-items-center"],["styleClass","p-button-info","icon","pi pi-plus","label","Adicionar","pTooltip","Adicionar produto","tooltipPosition","top",3,"onClick"],["tooltipPosition","top",3,"pTooltip"],[1,"flex","justify-content-center","gap-3","align-content-center","align-items-center"],["pButton","","pRipple","","icon","pi pi-pencil","pTooltip","Editar produto","tooltipPosition","top",1,"p-button-rounded","p-button-warning",3,"click"],["pButton","","pRipple","","icon","pi pi-trash","pTooltip","Remover produto","tooltipPosition","top",1,"p-button-rounded","p-button-danger",3,"click"]],template:function(o,s){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"p-card",2)(3,"p-table",3,4),t.NdJ("selectionChange",function(c){return s.productSelected=c}),t.YNc(5,R,39,15,"ng-template",5),t.YNc(6,H,17,12,"ng-template",6),t.qZA()()()()),2&o&&(t.xp6(3),t.Q6J("value",s.products)("rows",10)("paginator",!0)("responsive",!0)("globalFilterFields",t.DdM(9,$))("tableStyle",t.DdM(10,N))("selection",s.productSelected)("rowHover",!0)("showCurrentPageReport",!0))},dependencies:[g.Z,a.jx,l.Hq,l.zx,d.iA,d.lQ,d.fz,d.xl,P.u,h.H9,B]})}return r})();const Y=function(){return{width:"50vw"}},j=[{path:"",component:(()=>{class r{constructor(e,o,s,i,c,I){this.productsService=e,this.productsDtService=o,this.router=s,this.messageService=i,this.confirmationService=c,this.dialogService=I,this.destroy$=new w.x,this.productsData=[]}ngOnInit(){this.getServiceProductsData()}getServiceProductsData(){const e=this.productsDtService.getProductsData();e.length>0?this.productsData=e:this.getApiProductsData()}getApiProductsData(){this.productsService.getAllProducts().pipe((0,u.R)(this.destroy$)).subscribe({next:e=>{e.length>0&&(this.productsData=e)},error:e=>{console.log(e),this.messageService.add({severity:"error",summary:"Erro",detail:"Erro ao buscar produtos",life:2500}),this.router.navigate(["/dashboard"])}})}handleProductAction(e){e&&(this.ref=this.dialogService.open(U.d,{header:e?.action,width:"70%",contentStyle:{overflow:"auto"},baseZIndex:1e4,maximizable:!0,data:{event:e,productsDatas:this.productsData}}),this.ref.onClose.pipe((0,u.R)(this.destroy$)).subscribe({next:()=>this.getApiProductsData()}))}handleDeleteProductAction(e){e&&this.confirmationService.confirm({message:`Confirma a exclus\xe3o do produto: ${e?.productName}`,header:"Confirma\xe7\xe3o de exclus\xe3o",icon:"pi pi-exclamation-triangle",acceptLabel:"Sim",rejectLabel:"N\xe3o",accept:()=>this.deleteProduct(e?.product_id)})}deleteProduct(e){e&&this.productsService.deleteProduct(e).pipe((0,u.R)(this.destroy$)).subscribe({next:o=>{o&&(this.messageService.add({severity:"success",summary:"Sucesso",detail:"Produto removido com sucesso",life:2500}),this.getApiProductsData())},error:o=>{console.log(o),this.messageService.add({severity:"error",summary:"Erro",detail:"Erro ao excluir o produto",life:2500}),this.router.navigate(["/dashboard"])}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static#t=this.\u0275fac=function(o){return new(o||r)(t.Y36(O.s),t.Y36(F.H),t.Y36(T.F0),t.Y36(a.ez),t.Y36(a.YP),t.Y36(p.xA))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-products-home"]],decls:3,vars:4,consts:[[3,"products","productEvent","deleteProductEvent"]],template:function(o,s){1&o&&(t._UZ(0,"app-toolbar-navigation"),t.TgZ(1,"app-products-table",0),t.NdJ("productEvent",function(c){return s.handleProductAction(c)})("deleteProductEvent",function(c){return s.handleDeleteProductAction(c)}),t.qZA(),t._UZ(2,"p-confirmDialog")),2&o&&(t.xp6(1),t.Q6J("products",s.productsData),t.xp6(1),t.Akn(t.DdM(3,Y)))},dependencies:[J.p,f.Q,Q]})}return r})()}];let z=(()=>{class r{static#t=this.\u0275fac=function(o){return new(o||r)};static#e=this.\u0275mod=t.oAB({type:r});static#o=this.\u0275inj=t.cJS({providers:[p.xA,a.YP],imports:[h.ez,v.u5,T.Bz.forChild(j),v.UX,y.m,Z.JF,g.d,l.hJ,d.U$,C.zz,E.Iu,D.j,M.A,b.L$,p.DL,S.kW,f.D,P.z]})}return r})()}}]);