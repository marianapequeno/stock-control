"use strict";(self.webpackChunkstock_control=self.webpackChunkstock_control||[]).push([[230],{8230:(U,h,r)=>{r.r(h),r.d(h,{CategoriesModule:()=>H});var b=r(6814),s=r(95),y=r(1365),C=r(8645),l=r(9773),g=function(i){return i.ADD_CATEGORY_ACTION="Adicionar Categoria",i.EDIT_CATEGORY_ACTION="Editar Categoria",i}(g||{}),e=r(4946),p=r(1356),d=r(5219),v=r(1001),u=r(707),f=r(3714);let S=(()=>{class i{constructor(t,o,a,n){this.ref=t,this.formBuilder=o,this.messageService=a,this.categoriesService=n,this.destroy$=new C.x,this.addCategoryAction=g.ADD_CATEGORY_ACTION,this.editCategoryAction=g.EDIT_CATEGORY_ACTION,this.categoryForm=this.formBuilder.group({name:["",s.kI.required]})}ngOnInit(){this.categoryAction=this.ref.data,this.categoryAction?.event?.action===this.editCategoryAction&&null!==this.categoryAction?.event.categoryName&&this.setCategoryName(this.categoryAction?.event?.categoryName)}handleSubmitCategoryAction(){this.categoryAction?.event?.action==this.addCategoryAction?this.handleSubmitAddCategory():this.categoryAction?.event?.action==this.editCategoryAction&&this.handleSubmitEditCategory()}handleSubmitAddCategory(){this.categoryForm?.value&&this.categoryForm?.valid&&this.categoriesService.createNewCategory({name:this.categoryForm.value.name}).pipe((0,l.R)(this.destroy$)).subscribe({next:o=>{o&&(this.categoryForm.reset(),this.messageService.add({severity:"success",summary:"Sucesso",detail:"Categoria criada com sucesso!",life:3e3}))},error:o=>{console.log(o),this.categoryForm.reset(),this.messageService.add({severity:"error",summary:"Erro",detail:"Erro ao criar categoria!",life:3e3})}})}handleSubmitEditCategory(){this.categoryForm?.value&&this.categoryForm?.valid&&this.categoryAction?.event.id&&this.categoriesService.editCategoryName({name:this.categoryForm?.value.name,category_id:this.categoryAction?.event?.id}).pipe((0,l.R)(this.destroy$)).subscribe({next:()=>{this.categoryForm.reset(),this.messageService.add({severity:"success",summary:"Sucesso",detail:"Categoria alterada com sucesso!",life:3e3})},error:o=>{console.log(o),this.categoryForm.reset(),this.messageService.add({severity:"error",summary:"Erro",detail:"Erro ao alterar categoria!",life:3e3})}})}setCategoryName(t){t&&this.categoryForm.setValue({name:t})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static#e=this.\u0275fac=function(o){return new(o||i)(e.Y36(p.S),e.Y36(s.qu),e.Y36(d.ez),e.Y36(v.G))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-category-form"]],decls:6,vars:2,consts:[[3,"formGroup","ngSubmit"],[1,"card","flex","flex-column","md:flex-column","gap-3"],["pInputText","","placeholder","Nome","formControlName","name"],[1,"flex","flex-row","justify-content-center","align-content-center","align-items-center"],["type","submit","label","Concluir",3,"disabled"]],template:function(o,a){1&o&&(e.TgZ(0,"div")(1,"form",0),e.NdJ("ngSubmit",function(){return a.handleSubmitCategoryAction()}),e.TgZ(2,"div",1),e._UZ(3,"input",2),e.TgZ(4,"div",3),e._UZ(5,"p-button",4),e.qZA()()()()),2&o&&(e.xp6(1),e.Q6J("formGroup",a.categoryForm),e.xp6(4),e.Q6J("disabled",!a.categoryForm.valid))},dependencies:[s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,u.zx,f.o]})}return i})();var Z=r(8474),A=r(4532),m=r(909),T=r(3904),x=r(3259);function F(i,E){if(1&i){const t=e.EpF();e.TgZ(0,"tr")(1,"th",6)(2,"div",7)(3,"div",7),e._uU(4," Nome "),e.qZA(),e.TgZ(5,"div",7),e._UZ(6,"p-sortIcon",8)(7,"p-columnFilter",9),e.qZA()()(),e.TgZ(8,"th")(9,"div",10)(10,"p-button",11),e.NdJ("onClick",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.handleCategoryEvent(a.addCategoryAction))}),e.qZA()()()()}2&i&&(e.xp6(7),e.Q6J("showMatchModes",!1)("showOperator",!1)("showAddButton",!1))}function D(i,E){if(1&i){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td")(4,"div",12)(5,"button",13),e.NdJ("click",function(){const n=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.handleCategoryEvent(c.editCategoryAction,null==n?null:n.id,null==n?null:n.name))}),e.qZA(),e.TgZ(6,"button",14),e.NdJ("click",function(){const n=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.handleDeleteCategoryEvent(null==n?null:n.id,null==n?null:n.name))}),e.qZA()()()()}if(2&i){const t=E.$implicit;e.xp6(2),e.Oqu(null==t?null:t.name)}}const N=function(){return{"min-width":"75rem"}},O=function(){return{width:"50vw"}};let R=(()=>{class i{constructor(){this.categories=[],this.categoryEvent=new e.vpe,this.deleteCategoryEvent=new e.vpe,this.addCategoryAction=g.ADD_CATEGORY_ACTION,this.editCategoryAction=g.EDIT_CATEGORY_ACTION}handleDeleteCategoryEvent(t,o){""!=t&&""!=o&&this.deleteCategoryEvent.emit({category_id:t,categoryName:o})}handleCategoryEvent(t,o,a){t&&""!==t&&this.categoryEvent.emit({action:t,id:o,categoryName:a})}static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-categories-table"]],inputs:{categories:"categories"},outputs:{categoryEvent:"categoryEvent",deleteCategoryEvent:"deleteCategoryEvent"},decls:7,vars:12,consts:[[1,"container"],[1,"col-12"],["styleClass","shadow-3 m-5 text-indigo-800","header","Categorias de produtos"],["dataKey","id","currentPageReportTemplate","Mostrando {first} de {last} de {totalRecords} categorias",3,"value","selection","rows","paginator","responsive","tableStyle","rowHover","showCurrentPageReport"],["pTemplate","header"],["pTemplate","body"],["pSortableColumn","name"],[1,"flex","justify-content-between","align-items-center"],["field","name"],["type","text","field","name","display","menu","matchMode","contains",3,"showMatchModes","showOperator","showAddButton"],[1,"flex","justify-content-center","align-items-center"],["styleClass","p-button-info","icon","pi pi-plus","pTooltip","Adicionar Categoria","tooltipPosition","top","label","Adicionar",3,"onClick"],[1,"flex","justify-content-center","gap-3","align-content-center","align-items-center"],["pButton","","pRipple","","icon","pi pi-pencil","pTooltip","Editar Categoria","tooltipPosition","top",1,"p-button-rounded","p-button-warning",3,"click"],["pButton","","pRipple","","icon","pi pi-trash","pTooltip","Remover Categoria","tooltipPosition","top",1,"p-button-rounded","p-button-danger",3,"click"]],template:function(o,a){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"p-card",2)(3,"p-table",3),e.YNc(4,F,11,3,"ng-template",4),e.YNc(5,D,7,1,"ng-template",5),e.qZA()()(),e._UZ(6,"p-confirmDialog"),e.qZA()),2&o&&(e.xp6(3),e.Q6J("value",a.categories)("selection",a.categorySelected)("rows",10)("paginator",!0)("responsive",!0)("tableStyle",e.DdM(10,N))("rowHover",!0)("showCurrentPageReport",!0),e.xp6(3),e.Akn(e.DdM(11,O)))},dependencies:[A.Z,d.jx,u.Hq,u.zx,m.iA,m.lQ,m.fz,m.xl,T.Q,x.u]})}return i})();const Y=[{path:"",component:(()=>{class i{constructor(t,o,a,n,c){this.categoriesService=t,this.dialogService=o,this.messageService=a,this.confirmationService=n,this.router=c,this.destroy$=new C.x,this.categoriesDatas=[]}ngOnInit(){this.getAllCategories()}getAllCategories(){this.categoriesService.getAllCategories().pipe((0,l.R)(this.destroy$)).subscribe({next:t=>{t.length>0&&(this.categoriesDatas=t)},error:t=>{console.log(t),this.messageService.add({severity:"error",summary:"Erro",detail:"Erro ao buscar categorias!",life:3e3}),this.router.navigate(["/dashboard"])}})}handleDeleteCategoryAcion(t){t&&this.confirmationService.confirm({message:`Confirma a exclus\xe3o da categoria ${t?.categoryName}`,header:"Confirma\xe7\xe3o de exclus\xe3o",icon:"pi pi-exclamation-triangle",acceptLabel:"Sim",rejectLabel:"N\xe3o",accept:()=>this.deleteCategory(t?.category_id)})}deleteCategory(t){t&&(this.categoriesService.deleteCategory({category_id:t}).pipe((0,l.R)(this.destroy$)).subscribe({next:()=>{this.getAllCategories(),this.messageService.add({severity:"success",summary:"Sucesso",detail:"Categoria removida com sucesso!",life:3e3})},error:o=>{console.log(o),this.getAllCategories(),this.messageService.add({severity:"error",summary:"Erro",detail:"Erro ao remover categoria!",life:3e3})}}),this.getAllCategories())}handleCategoryAcion(t){t&&(this.ref=this.dialogService.open(S,{header:t?.action,width:"70%",contentStyle:{overflow:"auto"},baseZIndex:1e4,maximizable:!0,data:{event:t}}),this.ref.onClose.pipe((0,l.R)(this.destroy$)).subscribe({next:()=>this.getAllCategories()}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static#e=this.\u0275fac=function(o){return new(o||i)(e.Y36(v.G),e.Y36(p.xA),e.Y36(d.ez),e.Y36(d.YP),e.Y36(y.F0))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-categories-home"]],decls:2,vars:1,consts:[[3,"categories","deleteCategoryEvent","categoryEvent"]],template:function(o,a){1&o&&(e._UZ(0,"app-toolbar-navigation"),e.TgZ(1,"app-categories-table",0),e.NdJ("deleteCategoryEvent",function(c){return a.handleDeleteCategoryAcion(c)})("categoryEvent",function(c){return a.handleCategoryAcion(c)}),e.qZA()),2&o&&(e.xp6(1),e.Q6J("categories",a.categoriesDatas))},dependencies:[Z.p,R]})}return i})()}];var I=r(6208),$=r(9862),J=r(9663),G=r(5609),w=r(6218),M=r(9653),z=r(3866);let H=(()=>{class i{static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275mod=e.oAB({type:i});static#o=this.\u0275inj=e.cJS({providers:[p.xA,d.YP],imports:[b.ez,s.u5,s.UX,y.Bz.forChild(Y),I.m,$.JF,A.d,u.hJ,m.U$,J.zz,G.Iu,f.j,w.A,M.L$,p.DL,z.kW,T.D,x.z]})}return i})()}}]);